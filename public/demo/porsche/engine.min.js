Banner.el={},Banner.getElementsBy=function(a){Banner.el.length&&(Banner.el={});for(var b=document.querySelectorAll("["+a+"]"),c=0;c<b.length;c++)Banner.el[b[c].getAttribute(a)]=b[c]},Banner.parseElId=function(a){return"string"==typeof a?a:a.getAttribute("id")},Banner.elHasClass=function(a,b){return(" "+a.className+" ").indexOf(" "+b+" ")>-1},Banner.Animation={},Banner.Animation.config=AnimationConfig,Banner.Template={item:{}},Banner.changeCar=function(a,b){Banner.Template.item.current(Banner.el.Car_current,a,b)},Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var a=this.length-1;a>=0;a--)this[a]&&this[a].parentElement&&this[a].parentElement.removeChild(this[a])},Banner.Data.Cars=[{id:"c",name:"911 Carrera 4S",title:"Die neuen 911 Carrera 4 Modelle.",copy:"Kraftstoffverbrauch/Emissionen 911 Carrera 4S:<br> Kombiniert in l/100 km 8.9-7.9; CO<sub>2</sub>-Emission Kombiniert in g/km 204-180."},{id:"t",name:"911 Targa 4",title:"Die neuen 911 Targa 4 Modelle.",copy:"Kraftstoffverbrauch/Emissionen 911 Targa 4:<br> Kombiniert in l/100 km 8.9-7.9; CO<sub>2</sub>-Emission Kombiniert in g/km 206-182."}],Banner.Data.Colors=[{name:"yellow",tip:"racinggelb"},{name:"red",tip:"indischrot"},{name:"blue",tip:"saphirblaumetallic"},{name:"black",tip:"tiefschwarzmetallic"}],Banner.Data.Current={id:0,view:"front",color:"black"},Banner.Template.item.colors=function(a){for(var b=Banner.Data.Colors,c="",d=0;d<b.length;d++)c+='<div class="color color-'+b[d].name+'" data-color="'+b[d].name+'" data-tip="'+b[d].tip+'"></div>';a.insertAdjacentHTML("afterBegin",c),Banner.ColorEl=document.getElementsByClassName("color");for(var e=function(a){var b=a?a.target:window.event.srcElement;Banner.Data.Current.color!==b.getAttribute("data-color")&&(Banner.Data.Current.color=b.getAttribute("data-color"),Banner.changeCar(0))},f=0;f<Banner.ColorEl.length;f++){var g=Banner.ColorEl[f];g.addEventListener("click",e)}},Banner.Template.item.copy=function(a){a.innerHTML=Banner.Data.Cars[Banner.Data.Current.id].copy},Banner.Template.item.current=function(a,b,c){var d=Banner.Data.Current,e=new Image;e.src="car-"+Banner.Data.Cars[d.id].id+"-"+d.view+"-"+d.color+".png",e.onload=function(){var d=a.childNodes;if(0===b)a.appendChild(e),d[0].remove();else if(1===b)e.style.opacity=0,a.appendChild(e),TweenMax.to(e,.3,{opacity:1,ease:Power2.easeInOut}),TweenMax.to(d[0],.5,{opacity:0,ease:Power1.easeInOut,onComplete:function(){d[0].remove()}}),TweenMax.to(Banner.el.Copy,.2,{opacity:0,ease:Power1.easeInOut,onComplete:function(){Banner.Template.item.copy(Banner.el.Copy)}}),TweenMax.to(Banner.el.Copy,.5,{opacity:1,ease:Power1.easeInOut,delay:.3}),TweenMax.to(Banner.el.Subtitle,.2,{opacity:0,x:-10,ease:Power3.easeInOut,onComplete:function(){Banner.Template.item.subtitle(Banner.el.Subtitle)}}),TweenMax.to(Banner.el.Subtitle,.4,{opacity:1,x:0,ease:Power2.easeInOut,delay:.25});else if(2===b){a.appendChild(e);var f,g;"right"===c?(f=50,g=-50):"left"===c&&(f=-50,g=50),TweenMax.to(d[0],.75,{opacity:0,x:f,scale:.85,ease:Expo.easeInOut}),TweenMax.from(e,.5,{opacity:0,x:g,scale:.85,ease:Expo.easeInOut,delay:.1,onComplete:function(){d[0].remove(),Banner.SlideActive=!1}})}else a.appendChild(e)}},Banner.Template.item.dropdown=function(a){var b,c=function(){Banner.el["dd-active"].innerHTML=Banner.Data.Cars[Banner.Data.Current.id].name;for(var a=Banner.Data.Cars,e="",f=0;f<a.length;f++)f!==Banner.Data.Current.id&&(e+='<div class="dd-list-item" data-id="'+f+'">'+a[f].name+"</div>");Banner.el["dd-list"].innerHTML=e,b=document.getElementsByClassName("dd-list-item");for(var g=function(a){var b=a?a.target:window.event.srcElement;Banner.Data.Current.id!==+b.getAttribute("data-id")&&(Banner.Data.Current.id=+b.getAttribute("data-id"),Banner.changeCar(1),c(),d())},h=0;h<b.length;h++)b[h].addEventListener("click",g)};c();var d=function(){a.classList.toggle("active"),Banner.elHasClass(a,"active")?(Banner.el["dd-list"].style.zIndex=27,Banner.el["dd-list"].style.display="block",TweenMax.to(Banner.el["dd-list"],.2,{opacity:1})):TweenMax.to(Banner.el["dd-list"],.2,{opacity:0,onComplete:function(){Banner.el["dd-list"].style.zIndex=22,Banner.el["dd-list"].style.display="none"}})};Banner.el["dd-active"].addEventListener("click",d)},Banner.Template.item.imagesPreload=function(a){for(var b,c=(2*Banner.Data.Colors.length*Banner.Data.Cars.length,0);c<Banner.Data.Colors.length;c++)for(var d=Banner.Data.Colors[c].name,e=0;e<Banner.Data.Cars.length;e++)b+='<div style="background-image: url(car-'+Banner.Data.Cars[e].id+"-rear-"+d+'.png)"></div><div style="background-image: url(car-'+Banner.Data.Cars[e].id+"-front-"+d+'.png)"></div>';a.innerHTML=b},Banner.Template.item.slide=function(){Banner.SlideActive=!1;for(var a=document.getElementsByClassName("car-controls"),b=function(a){if(!Banner.SlideActive){Banner.SlideActive=!0;var b=a?a.target:window.event.srcElement,c=b.getAttribute("data-direction");Banner.Data.Current.view="front"===Banner.Data.Current.view?"rear":"front",Banner.changeCar(2,c)}},c=0;c<a.length;c++)a[c].addEventListener("click",b)},Banner.Template.item.subtitle=function(a){a.innerHTML=Banner.Data.Cars[Banner.Data.Current.id].title},Banner.Template.Init=function(a){var b,c=Banner.Template.item,d="data-template",e=[],f=[];f=a?a:document.querySelectorAll("["+d+"]");for(var g in c)e.push(g);for(var h=0;h<f.length;h++){b=f[h];for(var i=0;i<e.length;i++)b.getAttribute(d)===e[i]&&c[e[i]](b)}Banner.getElementsBy("id")},Banner.click_Logo=function(){Enabler.exit("Logo Exit")},Banner.click_CTA=function(){Enabler.exit("CTA Exit")},Banner.click_Car=function(){Enabler.exit("Car Exit")},Banner.loadImages=function(a){function b(){var a,b=[],c=document.getElementsByTagName("*");for(c=b.slice.call(c,0,c.length);c.length;)a=document.deepCss(c.shift(),"background-image"),a&&(a=/url\(['"]?([^")]+)/.exec(a)||[]),a=a[1],a&&-1==b.indexOf(a)&&(b[b.length]=a);return b}function c(a){function b(b){var c=new Image;c.src=b,c.onload=function(){d++,d===f&&a&&a()}}if(f)for(var c=0;f>c;c++)b(e[c]);else a&&a()}document.deepCss=function(a,b){if(!a||!a.style)return"";var c=b.replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()});if(a.currentStyle)return a.style[c]||a.currentStyle[c]||"";var d=document.defaultView||window;return a.style[c]||d.getComputedStyle(a,"").getPropertyValue(b)||""},Array.indexOf=Array.indexOf||function(a,b){b=b||0;for(var c=this.length;c>b;){if(this[b]===a)return b;++b}return-1};var d=0,e=b(),f=e.length;c(a)},Banner.init=function(){Banner.getElementsBy("id"),Banner.IE<10||(Banner.el.Logo.addEventListener("click",Banner.click_Logo),Banner.el.Button.addEventListener("click",Banner.click_CTA),Banner.el.Car_exit.addEventListener("click",Banner.click_Car),Banner.Data.dimension=Banner.getBannerDimension(),Banner.Template.Init(),Banner.getElementsBy("id"),Banner.loadImages(function(){Banner.el.Images_preload.remove(),Enabler.isVisible()?Banner.Animation.start():Enabler.addEventListener(studio.events.StudioEvent.VISIBLE,Banner.Animation.start)}))},Banner.Animation.start=function(){var a=Banner.el,b=(Banner.Animation.config,Array.prototype.slice.call(Banner.ColorEl).reverse()),c=new TimelineMax({repeat:-1}),d=new TimelineMax({onComplete:function(){a.Lock.style.zIndex=20}});d.to(a.Banner,.1,{opacity:1}).to(a.Arrow_mask,.75,{x:-900,ease:Power2.easeInOut,delay:.5}).add([TweenMax.staggerFrom(b,.2,{opacity:0,x:10,ease:Power1.easeInOut,delay:.65},.05),TweenMax.from([a.Title,a.Subtitle],.5,{x:10,ease:Power1.easeInOut,delay:.5}),TweenMax.from(a.Button,.35,{opacity:0,x:10,ease:Power1.easeInOut,delay:.5})],"-=1").from(a.Car_current,.75,{y:10,opacity:0,ease:Expo.easeInOut},"-=.1").add([TweenMax.from(a.Slide_left,.8,{x:13,opacity:0,ease:Expo.easeOut}),TweenMax.from(a.Slide_right,.8,{x:-13,opacity:0,ease:Expo.easeOut})],"-=.45"),c.to(a.mask.childNodes[1],6,{attr:{cx:-300},delay:5,ease:Power1.easeInOut}),Banner.TIMELINE=[d]};